{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { notificationWebSocket } from '../services/notificationWebSocket.js';\nexport default {\n  props: [\"showNotification\"],\n  name: \"ForumPage\",\n  data() {\n    return {\n      user: {\n        avatar: \"\",\n        name: \"\",\n        email: \"\",\n        username: \"guest\"\n      },\n      socket: null,\n      newPost: {\n        author: \"\",\n        title: \"\",\n        content: \"\",\n        image: \"\",\n        status: \"public\" // Default status\n      },\n      image: null,\n      imagePreview: null,\n      imageFileName: \"\",\n      // Add this line to track file name\n      posts: [],\n      message: \"\",\n      allowedUsers: [],\n      selectedAllowedUsers: [],\n      groups: [],\n      otherUsers: [],\n      followedUsers: [],\n      // Track followed users\n      // Chatbox data\n      isChatExpanded: false,\n      newMessage: \"\",\n      selectedChatUser: null,\n      chatUsers: [],\n      currentMessage: {\n        type: \"\",\n        message: \"\",\n        receiver: \"\",\n        username: \"\"\n      },\n      showCreateGroup: false,\n      newGroup: {\n        title: \"\",\n        description: \"\",\n        creator_id: null\n      },\n      groupMembership: {},\n      postsPrvMap: {},\n      showNotifications: false,\n      notifications: [],\n      commentImages: {},\n      unreadNotificationCount: 0,\n      showImageModal: false,\n      selectedImage: null\n    };\n  },\n  beforeRouteEnter(to, from, next) {\n    fetch(\"http://localhost:8080/api/info\", {\n      method: \"GET\",\n      credentials: \"include\"\n    }).then(res => {\n      if (res.ok) {\n        next();\n      } else {\n        next('/login');\n      }\n    }).catch(() => {\n      next('/login');\n    });\n  },\n  async created() {\n    this.$router.push('/home');\n    try {\n      const userRes = await fetch(\"http://localhost:8080/api/info\", {\n        method: \"GET\",\n        credentials: \"include\"\n      });\n      const userData = await userRes.json();\n      console.log(\"userData\", userData);\n      this.user.name = userData.Username;\n      this.user.email = userData.Email;\n      this.user.username = userData.Username.toLowerCase();\n      if (userData.Avatar) {\n        this.user.avatar = `http://localhost:8080/uploads/${userData.Avatar}`;\n      } else {\n        this.user.avatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${userData.Username}`;\n      }\n      // Initialize WebSocket\n      this.initializeWebSocket();\n      await this.fetchPostsPrv();\n      await this.fetchPosts();\n      await this.fetchAllUsers();\n      await this.fetchAllowedUsers();\n      await this.fetchGroups();\n      await this.fetchNotifications();\n    } catch (err) {\n      console.error(\"Initialization failed:\", err);\n      this.$router.push(\"/login\");\n    }\n  },\n  methods: {\n    async fetchAllowedUsers() {\n      try {\n        const res = await fetch(\"http://localhost:8080/api/postsprivacy\", {\n          method: \"GET\",\n          credentials: \"include\"\n        });\n        if (res.ok) {\n          const data = await res.json();\n          if (!data.followers) {\n            return;\n          }\n          console.log(\"Allowed users data:\", data);\n          this.allowedUsers = data.followers.map(user => ({\n            username: user,\n            avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${user}`\n          }));\n        } else {\n          this.showNotification(\"Failed to fetch allowed users\", \"error\");\n          console.error(\"Failed to fetch allowed users\");\n        }\n      } catch (error) {\n        this.showNotification(\"Failed to fetch allowed users\", \"error\");\n        console.error(\"Error fetching allowed users:\", error);\n      }\n      console.log(\"Allowed users:\", this.allowedUsers);\n    },\n    async fetchAllUsers() {\n      try {\n        // Fetch all users for follow list\n        const allUsersRes = await fetch(\"http://localhost:8080/api/allusers\", {\n          method: \"GET\",\n          credentials: \"include\"\n        });\n        if (allUsersRes.ok) {\n          const allUsersData = await allUsersRes.json();\n          if (!allUsersData || allUsersData.length === 0) {\n            return;\n          }\n          console.log(\"All users data:\", allUsersData);\n          this.otherUsers = allUsersData.map(user => ({\n            name: user.fullname,\n            username: user.username,\n            avatar: user.avatar ? `http://localhost:8080/uploads/${user.avatar}` : `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`,\n            followed: user.followed || false // Track if the user is followed\n          }));\n\n          // Initialize followedUsers based on allowedUsers\n          this.followedUsers = this.otherUsers.filter(user => user.followed);\n          console.log(\"Followed users:\", this.followedUsers);\n        }\n\n        // Fetch chat users from openchat endpoint\n        const chatUsersRes = await fetch(\"http://localhost:8080/api/openchat\", {\n          method: \"GET\",\n          credentials: \"include\"\n        });\n        if (chatUsersRes.ok) {\n          const chatUsersData = await chatUsersRes.json();\n          console.log(\"Chat users data:\", chatUsersData);\n          if (!chatUsersData || chatUsersData.length === 0) {\n            return;\n          } else {\n            this.chatUsers = chatUsersData.map(user => ({\n              id: user.id,\n              fullname: user.full_name,\n              name: user.username,\n              messages: [],\n              // Initialize empty messages array\n              avatar: user.avatar ? `http://localhost:8080/uploads/${user.avatar}` : `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`\n            }));\n          }\n        } else {\n          this.showNotification(\"Failed to fetch chat users\", \"error\");\n          console.error(\"Failed to fetch chat users\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching chat users:\", error);\n        this.showNotification(\"Error fetching chat users\", \"error\");\n      }\n    },\n    async handleChatClick() {\n      if (!this.isChatExpanded) {\n        await this.fetchChatUsers();\n        this.selectedChatUser = null; // Reset selected user when opening chat\n      }\n      this.isChatExpanded = !this.isChatExpanded;\n    },\n    setupNotificationWebSocket() {\n      // Register handler for real-time notifications\n      notificationWebSocket.onNotification('forum-page', notification => {\n        console.log('Received real-time notification:', notification);\n\n        // Refresh notifications and count from server to ensure accuracy\n        this.fetchNotifications();\n      });\n    },\n    async fetchNotificationCount() {\n      try {\n        const res = await fetch('http://localhost:8080/api/notifications', {\n          method: 'GET',\n          credentials: 'include'\n        });\n        if (res.ok) {\n          const data = await res.json();\n          // Only update the count, don't store notifications unless popup is open\n          this.unreadNotificationCount = (data || []).filter(n => !n.is_read).length;\n        }\n      } catch (err) {\n        console.error('Failed to fetch notification count:', err);\n      }\n    },\n    showFullImage(imageUrl) {\n      this.selectedImage = imageUrl;\n      this.showImageModal = true;\n    },\n    closeImageModal() {\n      this.showImageModal = false;\n      this.selectedImage = null;\n    }\n  },\n  mounted() {\n    // Set up notification WebSocket\n    this.setupNotificationWebSocket();\n    this.fetchPosts();\n    this.fetchNotifications();\n    this.fetchPostsPrv();\n    document.addEventListener('click', this.handleNotifClose);\n  },\n  beforeUnmount() {\n    // Clean up notification WebSocket\n    notificationWebSocket.removeNotificationHandler('forum-page');\n    document.removeEventListener('click', this.handleNotifClose);\n  },\n  computed: {}\n};","map":{"version":3,"names":["notificationWebSocket","props","name","data","user","avatar","email","username","socket","newPost","author","title","content","image","status","imagePreview","imageFileName","posts","message","allowedUsers","selectedAllowedUsers","groups","otherUsers","followedUsers","isChatExpanded","newMessage","selectedChatUser","chatUsers","currentMessage","type","receiver","showCreateGroup","newGroup","description","creator_id","groupMembership","postsPrvMap","showNotifications","notifications","commentImages","unreadNotificationCount","showImageModal","selectedImage","beforeRouteEnter","to","from","next","fetch","method","credentials","then","res","ok","catch","created","$router","push","userRes","userData","json","console","log","Username","Email","toLowerCase","Avatar","initializeWebSocket","fetchPostsPrv","fetchPosts","fetchAllUsers","fetchAllowedUsers","fetchGroups","fetchNotifications","err","error","methods","followers","map","showNotification","allUsersRes","allUsersData","length","fullname","followed","filter","chatUsersRes","chatUsersData","id","full_name","messages","handleChatClick","fetchChatUsers","setupNotificationWebSocket","onNotification","notification","fetchNotificationCount","n","is_read","showFullImage","imageUrl","closeImageModal","mounted","document","addEventListener","handleNotifClose","beforeUnmount","removeNotificationHandler","removeEventListener","computed"],"sources":["/Users/apple/Desktop/social-1/social-network/frontend/src/components/ForumPage.vue"],"sourcesContent":["<template>\n  <div class=\"forum-layout\">\n    <!-- Left Sidebar -->\n    <aside class=\"sidebar\">\n      <div class=\"sidebar-icons\">\n        <!-- Home Icon -->\n        <div class=\"sidebar-icon active\" title=\"Home\">\n          <svg width=\"24\" height=\"24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n            stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n            <path d=\"M3 12L12 3l9 9\" />\n            <path d=\"M9 21V9h6v12\" />\n          </svg>\n        </div>\n        <!-- Profile Icon -->\n        <div class=\"sidebar-icon\" title=\"Profile\" @click=\"goToProfile\">\n          <svg width=\"24\" height=\"24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n            stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n            <circle cx=\"12\" cy=\"8\" r=\"4\" />\n            <path d=\"M4 21v-2a4 4 0 014-4h8a4 4 0 014 4v2\" />\n          </svg>\n        </div>\n        <!-- Groups Icon -->\n        <div class=\"sidebar-icon\" title=\"Groups\" @click=\"goToMyGroups\">\n          <svg width=\"24\" height=\"24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n            stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n            <path d=\"M17 21v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2\" />\n            <circle cx=\"9\" cy=\"7\" r=\"4\" />\n            <path d=\"M23 21v-2a4 4 0 00-3-3.87\" />\n            <path d=\"M16 3.13a4 4 0 010 7.75\" />\n          </svg>\n        </div>\n        <!-- Settings Icon -->\n        <div class=\"sidebar-icon\" title=\"Settings\" @click=\"$router.push('/settings')\">\n          <svg width=\"24\" height=\"24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n            stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n            <circle cx=\"12\" cy=\"12\" r=\"3\" />\n            <path\n              d=\"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09a1.65 1.65 0 00-1-1.51 1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09a1.65 1.65 0 001.51-1 1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06a1.65 1.65 0 001.82.33h.09A1.65 1.65 0 0011 3.09V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51h.09a1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06a1.65 1.65 0 00-.33 1.82v.09A1.65 1.65 0 0020.91 11H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z\" />\n          </svg>\n        </div>\n        <div class=\"sidebar-icon\" ref=\"notifBtn\" title=\"Notifications\" @click=\"handleNotifClick\">\n          <svg width=\"22\" height=\"22\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n            stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n            <path d=\"M18 8a6 6 0 10-12 0c0 7-3 9-3 9h18s-3-2-3-9\" />\n            <path d=\"M13.73 21a2 2 0 01-3.46 0\" />\n          </svg>\n          <span v-if=\"unreadNotificationCount > 0\" class=\"notif-badge\">{{ unreadNotificationCount }}</span>\n        </div>\n        <!-- Notification Popup -->\n        <div v-if=\"showNotifications\" ref=\"notifPopup\" class=\"notif-popup\">\n          <div class=\"notif-popup-header\">Notifications</div>\n          <ul class=\"notif-list\">\n            <li v-if=\"!notifications || notifications.length === 0\" class=\"notif-item empty\">No notifications yet.</li>\n            <li v-for=\"notif in notifications || []\" :key=\"notif.time + notif.sender\" class=\"notif-item\"\n              :class=\"{ 'unread': !notif.is_read }\" @click=\"markNotificationAsRead(notif.id)\">\n              \n              <span class=\"notif-text\">\n                <b>{{ notif.sender }}</b>\n                <span v-if=\"notif.type === 'message'\">sent you a message: {{ notif.text && notif.text.length > 40 ?\n                  notif.text.slice(0, 40) + '…' : notif.text }}</span>\n                <span v-else>{{ notif.text }}</span>\n              </span>\n              <span class=\"notif-time\">{{ formatTimestamp(notif.time) }}</span>\n            </li>\n          </ul>\n        </div>\n        <div class=\"sidebar-icon\" @click=\"logout\">\n          <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n            stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n            <path d=\"M17 16l4-4m0 0l-4-4m4 4H7\" />\n            <path d=\"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4\" />\n          </svg>\n        </div>\n      </div>\n    </aside>\n\n    <!-- Main Content Area -->\n    <div class=\"main-area\">\n      <!-- Top Avatar Bar -->\n      <div class=\"avatar-bar\">\n        <div class=\"avatar-list\">\n          <div v-for=\"other in otherUsers\" :key=\"other.name\" class=\"avatar-item\">\n            <img :src=\"other.avatar\" :alt=\"other.name\" @click=\"gotoxprofile(other.username)\" />\n            <span class=\"avatar-name\">{{ other.name.split(' ')[0] }}</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- Create Post -->\n      <div class=\"create-post-card\">\n        <img class=\"profile-pic\" :src=\"user.avatar\" alt=\"Profile\" />\n        <form class=\"create-post-form\" @submit.prevent=\"submitPost\">\n          <input type=\"text\" v-model=\"newPost.title\" placeholder=\"What's on your mind?\" required />\n          <textarea v-model=\"newPost.content\" placeholder=\"Share your thoughts...\" required></textarea>\n          <label class=\"file-upload-label\">\n            <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n              stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n              <path d=\"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4\" />\n              <polyline points=\"17 8 12 3 7 8\" />\n              <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n            </svg>\n            Upload Image\n            <input type=\"file\" @change=\"handleImageUpload\" accept=\"image/*\" />\n          </label>\n          <img v-if=\"imagePreview\" :src=\"imagePreview\" class=\"image-preview\" alt=\"Preview\" @click=\"showFullImage(imagePreview)\" />\n          <div class=\"create-post-row\">\n            <div class=\"status-select\">\n              <select v-model=\"newPost.status\" required>\n                <option value=\"public\">Public</option>\n                <option value=\"private\">Private</option>\n                <option value=\"semi-private\">Semi-Private</option>\n              </select>\n            </div>\n          </div>\n          <div v-if=\"newPost.status === 'semi-private'\" class=\"allowed-users-select\">\n            <div v-if=\"allowedUsers.length === 0\">No User is following you!</div>\n            <label v-else v-for=\"user in allowedUsers\" :key=\"user.username\" class=\"allowed-user-pill\">\n              <input type=\"checkbox\" v-model=\"selectedAllowedUsers\" :value=\"user.username\" />\n              <span class=\"custom-checkbox\">\n                <svg v-if=\"selectedAllowedUsers.includes(user.username)\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\"\n                  fill=\"none\">\n                  <circle cx=\"9\" cy=\"9\" r=\"9\" fill=\"#4f46e5\" />\n                  <path d=\"M5 9l3 3 5-5\" stroke=\"#fff\" stroke-width=\"2\" stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\" />\n                </svg>\n                <svg v-else width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\">\n                  <circle cx=\"9\" cy=\"9\" r=\"9\" fill=\"#e5e7eb\" />\n                </svg>\n              </span>\n              <img :src=\"user.avatar\" :alt=\"user.username\" class=\"allowed-user-avatar\" />\n              <span class=\"allowed-user-name\">{{ user.username }}</span>\n            </label>\n          </div>\n          <button class=\"post-btn\" type=\"submit\">Post</button>\n          <div v-if=\"message\" class=\"message\">{{ message }}</div>\n        </form>\n      </div>\n\n      <!-- Posts Grid -->\n      <div class=\"posts-grid\">\n        <div v-if=\"posts.length === 0\" class=\"no-posts\">No posts available. Be the first to post!</div>\n        <div v-else class=\"post-card\" v-for=\"post in posts\" :key=\"post.ID\">\n          <div class=\"post-image\" v-if=\"post.imageUrl\">\n            <img :src=\"post.imageUrl\" alt=\"Post image\" @click=\"showFullImage(post.imageUrl)\" />\n          </div>\n          <div class=\"post-header\">\n            <img class=\"post-author-pic\" :src=\"post.authorAvatar\" alt=\"Author\" />\n            <div>\n              <h4>{{ post.Author }}</h4>\n              <p class=\"post-timestamp\">{{ formatTimestamp(post.Creation_date) }}</p>\n            </div>\n          </div>\n          <h3 class=\"post-title\">{{ post.Title }}</h3>\n          <p class=\"post-content\">{{ post.Content }}</p>\n          <div class=\"post-image\" v-if=\"post.Image\" :class=\"post.Image ? 'post-image' : ''\" @click=\"showFullImage(post.Image)\">\n            <img :src=\"post.Image\" alt=\"Post Image\" />\n          </div>\n          <div class=\"post-actions\">\n            <span class=\"icon-btn\" @click=\"toggleComments(post)\">\n              <svg width=\"22\" height=\"22\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n                stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n                <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\n              </svg>\n            </span>\n          </div>\n          <!-- Comments Section -->\n          <div v-if=\"post.showComments\" class=\"comments-section\">\n            <div v-if=\"post.comments.length === 0\" class=\"no-comments\">No comments yet. Be the first to comment!</div>\n            <div v-else class=\"comment\" v-for=\"comment in post.comments\" :key=\"comment.id\">\n              <div class=\"comment-header\">\n                <img class=\"comment-author-pic\" :src=\"comment.avatar\" alt=\"Comment Author\" />\n                <div>\n                  <h5>{{ comment.author }}</h5>\n                  <p class=\"comment-timestamp\">{{ formatTimestamp(comment.creation_date) }}</p>\n                </div>\n              </div>\n              <p class=\"comment-content\">{{ comment.comment }}</p>\n              <div class=\"comment-image\" v-if=\"comment.image\" :class=\"comment.image ? 'comment-image' : ''\" @click=\"showFullImage(comment.image)\">\n                <img class=\"comment-img\" :src=\"comment.image\" alt=\"Comment Image\" />\n              </div>\n            </div>\n            <form @submit.prevent=\"addComment(post)\" class=\"comment-form\">\n              <div class=\"comment-input-row\">\n                <textarea v-model=\"post.newComment\" placeholder=\"Add a comment...\" required></textarea>\n                <label class=\"file-upload-label\">\n                  <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n                    <path d=\"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4\" />\n                    <polyline points=\"17 8 12 3 7 8\" />\n                    <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n                  </svg>\n                  <input type=\"file\" @change=\"handleImageUpload($event, post.Id)\" accept=\"image/*\" />\n                </label>\n                <button type=\"submit\" class=\"comment-submit-btn\" title=\"Add Comment\">\n                  <svg width=\"22\" height=\"22\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n                    <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\n                  </svg>\n                </button>\n              </div>\n              <div v-if=\"commentImages[post.Id] && commentImages[post.Id].fileName\" class=\"file-name-display\">\n                Selected file: {{ commentImages[post.Id].fileName }}\n              </div>\n              <img v-if=\"commentImages[post.Id] && commentImages[post.Id].preview\" :src=\"commentImages[post.Id].preview\" class=\"image-preview\" alt=\"Preview\" @click=\"showFullImage(commentImages[post.Id].preview)\" />\n              <div v-if=\"post.commentError\" class=\"comment-error\">{{ post.commentError }}</div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Right Sidebar -->\n    <aside class=\"rightbar\">\n      <div class=\"groups-section\">\n        <div class=\"groups-header\">\n          <span>Groups</span>\n          <button class=\"create-group-btn\" @click=\"showCreateGroup = true\" title=\"Create Group\">\n            <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n              stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\" />\n              <path d=\"M12 8v8M8 12h8\" />\n            </svg>\n          </button>\n          <!-- <button class=\"invite-group-btn\" @click=\"inviteToGroup\" title=\"Invite to Group\">\n            <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" viewBox=\"0 0 24 24\"><path d=\"M21 10v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6\"/><path d=\"M3 6l9 6 9-6\"/></svg>\n          </button> -->\n        </div>\n        <ul class=\"groups-list\">\n          <li v-for=\"group in groups\" :key=\"group.id\" class=\"group-list-item group-clickable\"\n            @click=\"goToGroup(group.id)\">\n            <div class=\"group-info\">\n              <span class=\"group-avatar\">\n                <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n                  <path d=\"M17 21v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2\" />\n                  <circle cx=\"9\" cy=\"7\" r=\"4\" />\n                  <path d=\"M23 21v-2a4 4 0 00-3-3.87\" />\n                  <path d=\"M16 3.13a4 4 0 010 7.75\" />\n                </svg>\n              </span>\n              <div class=\"group-details\">\n                <span class=\"group-title\">{{ group.name }}</span>\n                <span class=\"group-desc\">{{ group.description }}</span>\n                <span v-if=\"group.is_owner\" class=\"owner-badge\">Owner</span>\n              </div>\n            </div>\n            <button v-if=\"group.member_status == 'accepted' && !group.is_owner\" class=\"followed-btn\"\n              @click.stop=\"toggleJoin(group)\">\n              Leave\n            </button>\n            <button v-else-if=\"group.member_status == 'pending' && !group.is_owner\" class=\"pending-btn\"\n              @click.stop=\"toggleJoin(group)\">\n              Cancel Request\n            </button>\n            <button v-else-if=\"group.member_status == 'invited' && !group.is_owner\" class=\"pending-btn\"\n              @click.stop=\"toggleJoin(group)\">\n              Accept Invitation\n            </button>\n            <button v-else-if=\"!group.is_owner\" class=\"follow-btn\" @click.stop=\"toggleJoin(group)\">\n              Join\n            </button>\n          </li>\n        </ul>\n      </div>\n      <div class=\"users-section\">\n        <div class=\"users-header\">\n          <span>Followed Users: </span>\n        </div>\n        <ul class=\"users-list\">\n          <li v-for=\"followed in followedUsers\" :key=\"followed.name\" class=\"user-list-item\">\n            <img class=\"mini-profile-pic\" :src=\"followed.avatar\" alt=\"User\" @click=\"gotoxprofile(followed.username)\" />\n            <span class=\"user-name\" @click=\"gotoxprofile(followed.username)\">{{ followed.name }}</span>\n          </li>\n        </ul>\n      </div>\n    </aside>\n\n    <!-- Create Group Modal -->\n    <div v-if=\"showCreateGroup\" class=\"modal-overlay\">\n      <div class=\"modal-content create-group-modal\">\n        <h3>Create New Group</h3>\n        <form @submit.prevent=\"createGroup\">\n          <div class=\"form-group\">\n            <label for=\"groupTitle\">Group Title</label>\n            <input id=\"groupTitle\" v-model=\"newGroup.title\" type=\"text\" required placeholder=\"Enter group title\" />\n          </div>\n          <div class=\"form-group\">\n            <label for=\"groupDescription\">Description</label>\n            <textarea id=\"groupDescription\" v-model=\"newGroup.description\" required\n              placeholder=\"Enter group description\"></textarea>\n          </div>\n          <div class=\"modal-buttons\">\n            <button type=\"submit\" class=\"submit-btn\">Create Group</button>\n            <button type=\"button\" class=\"cancel-btn\" @click=\"showCreateGroup = false\">\n              Cancel\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n\n    <!-- Chat Floating Button -->\n    <button class=\"chat-fab\" @click=\"handleChatClick\" title=\"Open Chat\">\n      <svg width=\"28\" height=\"28\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.2\" stroke-linecap=\"round\"\n        stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n        <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\n      </svg>\n    </button>\n\n    <!-- Chat Modal -->\n    <div v-if=\"isChatExpanded\" class=\"chat-modal-overlay\" @click.self=\"isChatExpanded = false\">\n      <div class=\"chat-modal\">\n        <div class=\"chat-modal-header\">\n          <span>Chat</span>\n          <button class=\"chat-modal-close\" @click=\"isChatExpanded = false\">&times;</button>\n        </div>\n        <div class=\"chat-users-list\">\n          <div class=\"chat-users-title\">Chat Users</div>\n          <ul>\n            <li v-for=\"user in chatUsers\" :key=\"user.name\" @click=\"selectChatUser(user)\"\n              :class=\"{ selected: selectedChatUser && selectedChatUser.name === user.name }\">\n              <img :src=\"user.avatar\" :alt=\"user.name\" class=\"chat-user-avatar\" />\n              <span>{{ user.fullname }}</span>\n            </li>\n          </ul>\n        </div>\n        <div class=\"chat-messages-area\" v-if=\"selectedChatUser\">\n          <div class=\"chat-messages-title\">Chat with {{ selectedChatUser.name }}</div>\n          <div class=\"chat-messages-list\">\n            <div v-for=\"msg in selectedChatUser.messages\" :key=\"msg.id\"\n              :class=\"['chat-msg', msg.sender === 'self' ? 'self' : 'other']\">\n              <span>{{ msg.text }}</span>\n              <span class=\"chat-msg-time\">{{ formatTimestamp(msg.timestamp) }}</span>\n            </div>\n          </div>\n          <form class=\"chat-send-form\" @submit.prevent=\"sendMessage\">\n            <input v-model=\"newMessage\" placeholder=\"Type a message...\" required />\n            <button type=\"submit\" class=\"chat-send-btn\" title=\"Send\">\n              <svg width=\"22\" height=\"22\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n                stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\n                <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\" />\n                <polygon points=\"22 2 15 22 11 13 2 9 22 2\" />\n              </svg>\n            </button>\n          </form>\n        </div>\n        <div v-else class=\"chat-no-user\">Select a user to start chatting</div>\n      </div>\n    </div>\n\n    <!-- Add Image Preview Modal -->\n    <div v-if=\"showImageModal\" class=\"image-modal-overlay\" @click=\"closeImageModal\">\n      <div class=\"image-modal-content\" @click.stop>\n        <img :src=\"selectedImage\" alt=\"Full size image\" />\n        <button class=\"close-modal-btn\" @click=\"closeImageModal\">&times;</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { notificationWebSocket } from '../services/notificationWebSocket.js';\n\nexport default {\n  props: [\"showNotification\"],\n  name: \"ForumPage\",\n  data() {\n    return {\n      user: {\n        avatar: \"\",\n        name: \"\",\n        email: \"\",\n        username: \"guest\",\n      },\n      socket: null,\n      newPost: {\n        author: \"\",\n        title: \"\",\n        content: \"\",\n        image: \"\",\n        status: \"public\", // Default status\n      },\n      image: null,\n      imagePreview: null,\n      imageFileName: \"\", // Add this line to track file name\n      posts: [],\n      message: \"\",\n      allowedUsers: [],\n      selectedAllowedUsers: [],\n      groups: [],\n      otherUsers: [],\n      followedUsers: [], // Track followed users\n      // Chatbox data\n      isChatExpanded: false,\n      newMessage: \"\",\n      selectedChatUser: null,\n      chatUsers: [],\n      currentMessage: {\n        type: \"\",\n        message: \"\",\n        receiver: \"\",\n        username: \"\",\n      },\n      showCreateGroup: false,\n      newGroup: {\n        title: \"\",\n        description: \"\",\n        creator_id: null,\n      },\n      groupMembership: {},\n      postsPrvMap: {},\n      showNotifications: false,\n      notifications: [],\n      commentImages: {},\n      unreadNotificationCount: 0,\n      showImageModal: false,\n      selectedImage: null,\n    };\n  },\n  beforeRouteEnter(to, from, next) {\n    fetch(\"http://localhost:8080/api/info\", {\n      method: \"GET\",\n      credentials: \"include\",\n    })\n      .then(res => {\n        if (res.ok) {\n          next();\n        } else {\n          next('/login');\n        }\n      })\n      .catch(() => {\n        next('/login');\n      });\n  },\n  async created() {\n    this.$router.push('/home');\n    try {\n      const userRes = await fetch(\"http://localhost:8080/api/info\", {\n        method: \"GET\",\n        credentials: \"include\",\n      });\n      const userData = await userRes.json();\n      console.log(\"userData\", userData);\n\n      this.user.name = userData.Username;\n      this.user.email = userData.Email;\n      this.user.username = userData.Username.toLowerCase();\n\n      if (userData.Avatar) {\n        this.user.avatar = `http://localhost:8080/uploads/${userData.Avatar}`;\n      } else {\n        this.user.avatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${userData.Username}`;\n      }\n      // Initialize WebSocket\n      this.initializeWebSocket();\n      await this.fetchPostsPrv();\n      await this.fetchPosts();\n      await this.fetchAllUsers();\n      await this.fetchAllowedUsers();\n      await this.fetchGroups();\n      await this.fetchNotifications();\n    } catch (err) {\n      console.error(\"Initialization failed:\", err);\n      this.$router.push(\"/login\");\n    }\n  },\n  methods: {\n    async fetchAllowedUsers() {\n      try {\n        const res = await fetch(\"http://localhost:8080/api/postsprivacy\", {\n          method: \"GET\",\n          credentials: \"include\",\n        });\n        if (res.ok) {\n          const data = await res.json();\n          if (!data.followers) {\n            return;\n          }\n          console.log(\"Allowed users data:\", data);\n\n          this.allowedUsers = data.followers.map((user) => ({\n            username: user,\n            avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${user}`,\n          }));\n        } else {\n          this.showNotification(\"Failed to fetch allowed users\", \"error\");\n          console.error(\"Failed to fetch allowed users\");\n        }\n      } catch (error) {\n        this.showNotification(\"Failed to fetch allowed users\", \"error\");\n        console.error(\"Error fetching allowed users:\", error);\n      }\n      console.log(\"Allowed users:\", this.allowedUsers);\n\n    },\n    async fetchAllUsers() {\n      try {\n        // Fetch all users for follow list\n        const allUsersRes = await fetch(\"http://localhost:8080/api/allusers\", {\n          method: \"GET\",\n          credentials: \"include\",\n        });\n        if (allUsersRes.ok) {\n          const allUsersData = await allUsersRes.json();\n          if ((!allUsersData) || allUsersData.length === 0) {\n            return;\n          }\n          console.log(\"All users data:\", allUsersData);\n          this.otherUsers = allUsersData.map((user) => ({\n            name: user.fullname,\n            username: user.username,\n            avatar: user.avatar\n              ? `http://localhost:8080/uploads/${user.avatar}`\n              : `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`,\n            followed: user.followed || false, // Track if the user is followed\n          }));\n\n          // Initialize followedUsers based on allowedUsers\n          this.followedUsers = this.otherUsers.filter(\n            (user) => user.followed\n          );\n          console.log(\"Followed users:\", this.followedUsers);\n\n        }\n\n        // Fetch chat users from openchat endpoint\n        const chatUsersRes = await fetch(\"http://localhost:8080/api/openchat\", {\n          method: \"GET\",\n          credentials: \"include\",\n        });\n        if (chatUsersRes.ok) {\n          const chatUsersData = await chatUsersRes.json();\n          console.log(\"Chat users data:\", chatUsersData);\n          if (!chatUsersData || chatUsersData.length === 0) {\n            return;\n          } else {\n            this.chatUsers = chatUsersData.map((user) => ({\n              id: user.id,\n              fullname: user.full_name,\n              name: user.username,\n              messages: [], // Initialize empty messages array\n              avatar: user.avatar \n                ? `http://localhost:8080/uploads/${user.avatar}`\n                : `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`,\n            }));\n          }\n        } else {\n          this.showNotification(\"Failed to fetch chat users\", \"error\");\n          console.error(\"Failed to fetch chat users\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching chat users:\", error);\n        this.showNotification(\"Error fetching chat users\", \"error\");\n      }\n    },\n\n    async handleChatClick() {\n      if (!this.isChatExpanded) {\n        await this.fetchChatUsers();\n        this.selectedChatUser = null; // Reset selected user when opening chat\n      }\n      this.isChatExpanded = !this.isChatExpanded;\n    },\n    setupNotificationWebSocket() {\n      // Register handler for real-time notifications\n      notificationWebSocket.onNotification('forum-page', (notification) => {\n        console.log('Received real-time notification:', notification);\n        \n        // Refresh notifications and count from server to ensure accuracy\n        this.fetchNotifications();\n      });\n    },\n    async fetchNotificationCount() {\n      try {\n        const res = await fetch('http://localhost:8080/api/notifications', {\n          method: 'GET',\n          credentials: 'include'\n        });\n        if (res.ok) {\n          const data = await res.json();\n          // Only update the count, don't store notifications unless popup is open\n          this.unreadNotificationCount = (data || []).filter(n => !n.is_read).length;\n        }\n      } catch (err) {\n        console.error('Failed to fetch notification count:', err);\n      }\n    },\n    showFullImage(imageUrl) {\n      this.selectedImage = imageUrl;\n      this.showImageModal = true;\n    },\n    closeImageModal() {\n      this.showImageModal = false;\n      this.selectedImage = null;\n    },\n  },\n  mounted() {\n    // Set up notification WebSocket\n    this.setupNotificationWebSocket();\n    \n    this.fetchPosts();\n    this.fetchNotifications();\n    this.fetchPostsPrv();\n    document.addEventListener('click', this.handleNotifClose);\n  },\n  beforeUnmount() {\n    // Clean up notification WebSocket\n    notificationWebSocket.removeNotificationHandler('forum-page');\n    document.removeEventListener('click', this.handleNotifClose);\n  },\n  computed: {\n  },\n};\n</script>\n\n<style scoped>\n/* Layout */\n.forum-layout {\n  display: flex;\n  min-height: 100vh;\n  background: #eaf1fb;\n  font-family: 'Inter', sans-serif;\n}\n\n/* Sidebar */\n.sidebar {\n  width: 70px;\n  background: #23263a;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 2rem 0 1rem 0;\n  border-radius: 1.5rem 0 0 1.5rem;\n  box-shadow: 2px 0 16px rgba(35, 38, 58, 0.08);\n  position: fixed;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 100;\n}\n\n.sidebar-icons {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n  width: 100%;\n  align-items: center;\n}\n\n.sidebar-icon {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  \n  align-items: center;\n  justify-content: center;\n  border-radius: 1rem;\n  \n  color: #fff;\n  font-size: 1.5rem;\n  opacity: 0.7;\n  cursor: pointer;\n}\n\n.sidebar-icon.active,\n.sidebar-icon:hover {\n  background: #35395a;\n  opacity: 1;\n}\n\n/* Main Area */\n.main-area {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 2rem 2rem 2rem 1.5rem;\n  min-width: 0;\n  margin-left: 70px; /* Add margin to account for fixed sidebar */\n}\n\n/* Top Avatar Bar */\n.avatar-bar {\n  width: 100%;\n  margin-bottom: 1.5rem;\n  overflow-x: auto;\n  padding-bottom: 0.5rem;\n}\n\n.avatar-list {\n  display: flex;\n  gap: 1.5rem;\n  align-items: center;\n  padding: 0.5rem 0;\n  min-width: min-content;\n}\n\n.avatar-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  cursor: pointer;\n  min-width: 56px;\n}\n\n.avatar-item img {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  border: 2px solid #fff;\n  box-shadow: 0 2px 8px rgba(35, 38, 58, 0.08);\n  margin-bottom: 0.25rem;\n  object-fit: cover;\n  transition: transform 0.2s;\n}\n\n.avatar-item img:hover {\n  transform: scale(1.08);\n}\n\n.avatar-name {\n  font-size: 0.8rem;\n  color: #23263a;\n  opacity: 0.7;\n  text-align: center;\n  max-width: 60px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.avatar-item.see-all .see-all-btn {\n  width: 48px;\n  height: 48px;\n  background: #f3f4f8;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #23263a;\n  font-size: 0.9rem;\n  font-weight: 600;\n  border: 1px solid #e5e7eb;\n  margin-bottom: 0.25rem;\n  cursor: pointer;\n}\n\n/* Custom scrollbar for avatar bar */\n.avatar-bar::-webkit-scrollbar {\n  height: 6px;\n}\n\n.avatar-bar::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 3px;\n}\n\n.avatar-bar::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.avatar-bar::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n/* Create Post Card */\n.create-post-card {\n  display: flex;\n  align-items: flex-start;\n  background: #fff;\n  border-radius: 1.25rem;\n  box-shadow: 0 4px 24px rgba(35, 38, 58, 0.08);\n  padding: 1.5rem 2rem;\n  margin-bottom: 2rem;\n  gap: 1.5rem;\n}\n\n.create-post-card .profile-pic {\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-top: 0.5rem;\n}\n\n.create-post-form {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.create-post-form input,\n.create-post-form textarea {\n\n  border: none;\n  background: #f3f4f8;\n  border-radius: 0.75rem;\n  padding: 0.9rem 1.2rem;\n  font-size: 1rem;\n  margin-bottom: 0.2rem;\n  resize: none;\n}\n\n.create-post-form textarea {\n  min-height: 70px;\n  resize: vertical;\n}\n\n.create-post-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n}\n\n\n.status-select select {\n  background: #f3f4f8;\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.3rem 1rem;\n  font-size: 0.95rem;\n  color: #23263a;\n}\n\n.allowed-users-select {\n  display: flex;\n  gap: 0.7rem;\n  flex-wrap: wrap;\n  margin-bottom: 0.5rem;\n}\n\n.allowed-user-pill {\n  display: flex;\n  align-items: center;\n  background: #f3f4f8;\n  border-radius: 2rem;\n  padding: 0.25rem 1rem 0.25rem 0.4rem;\n  font-size: 0.97rem;\n  color: #23263a;\n  cursor: pointer;\n  gap: 0.5rem;\n  box-shadow: 0 1px 4px rgba(35, 38, 58, 0.06);\n  border: 1.5px solid #e5e7eb;\n  transition: border 0.18s, box-shadow 0.18s, background 0.18s;\n  position: relative;\n}\n\n.allowed-user-pill:hover,\n.allowed-user-pill:focus-within {\n  border: 1.5px solid #4f46e5;\n  background: #e0e7ff;\n  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.10);\n}\n\n.allowed-user-pill input[type=\"checkbox\"] {\n  display: none;\n}\n\n.custom-checkbox {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 22px;\n  height: 22px;\n  margin-right: 0.1rem;\n}\n\n.allowed-user-avatar {\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 1.5px solid #e5e7eb;\n  background: #fff;\n}\n\n.allowed-user-name {\n  font-weight: 500;\n  color: #23263a;\n  font-size: 0.97rem;\n  margin-left: 0.1rem;\n}\n\n.post-btn {\n  background: linear-gradient(90deg, #23263a 60%, #4f46e5 100%);\n  color: #fff;\n  border: none;\n  border-radius: 0.7rem;\n  padding: 0.7rem 1.5rem;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  margin-top: 0.5rem;\n  align-self: flex-end;\n  transition: background 0.2s;\n}\n\n.post-btn:hover {\n  background: linear-gradient(90deg, #4f46e5 60%, #23263a 100%);\n}\n\n/* Posts Grid */\n.posts-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n  margin-top: 1.5rem;\n  width: 100%;\n  max-width: 900px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.post-card {\n  background: #fff;\n  border-radius: 1.25rem;\n  box-shadow: 0 4px 24px rgba(35, 38, 58, 0.08);\n  padding: 1.5rem 1.8rem 1.2rem 1.8rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  width: 100%;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n  height: auto;\n}\n\n.post-image {\n  width: 100%;\n  max-height: 400px;\n  overflow: hidden;\n  border-radius: 0.8rem;\n  margin-bottom: 0.7rem;\n  display: flex;\n  border-radius: 0.5rem;\n  align-items: center;\n  justify-content: center;\n}\n\n.post-image img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  border-radius: 0.8rem;\n}\n\n.post-header {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.post-author-pic {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.post-title {\n  font-size: 1.3rem;\n  color: #23263a;\n  font-weight: 600;\n  margin: 0.2rem 0;\n}\n\n.post-content {\n  color: #4b5563;\n  font-size: 1.1rem;\n  margin-bottom: 0.2rem;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  overflow-wrap: break-word;\n  max-width: 100%;\n  line-height: 1.6;\n  height: auto;\n}\n\n.post-actions {\n  display: flex;\n  gap: 1.2rem;\n  margin-top: 0.2rem;\n}\n\n.icon-btn {\n  font-size: 1.2rem;\n  color: #b0b3c6;\n  cursor: pointer;\n  transition: color 0.2s;\n}\n\n.icon-btn:hover {\n  color: #4f46e5;\n}\n\n.no-posts {\n  color: #b0b3c6;\n  text-align: center;\n  font-size: 1.1rem;\n  grid-column: 1/-1;\n}\n\n/* Right Sidebar */\n.rightbar {\n  width: 400px;\n  background: #fff;\n  border-radius: 0 1.5rem 1.5rem 0;\n  box-shadow: -2px 0 16px rgba(35, 38, 58, 0.08);\n  padding: 2rem 1.5rem 2rem 1.5rem;\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n\n.invite-group-btn {\n  background: #f3f4f8;\n  color: #23263a;\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.3rem 0.6rem;\n  margin-right: 0.5rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  transition: background 0.2s, color 0.2s;\n  position: relative;\n}\n\n.sidebar-icon[title=\"Notifications\"] {\n  position: relative;\n}\n\n.notif-badge {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  background: #ef4444;\n  color: white;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  font-size: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 600;\n  border: 2px solid #fff;\n  z-index: 1;\n}\n\n.notif-btn:hover,\n.invite-group-btn:hover {\n  background: #e0e7ff;\n  color: #4f46e5;\n}\n\n.logout-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: #f3f4f8;\n  color: #23263a;\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.4rem 1rem;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.logout-btn:hover {\n  background: #e5e7eb;\n}\n\n.create-group-btn {\n  background: #4f46e5;\n  color: #fff;\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.2rem 0.5rem;\n  margin-right: 0.5rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  transition: background 0.2s;\n}\n\n.create-group-btn:hover {\n  background: #23263a;\n}\n\n.groups-header {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  justify-content: space-between;\n}\n\n.groups-header span {\n  flex: 1;\n}\n\n.groups-header .see-all-link {\n  flex: unset;\n}\n\n.groups-section {\n  margin-bottom: 2rem;\n  height: 300px;\n  overflow-y: auto;\n  padding-right: 10px;\n}\n\n.groups-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.group-list-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #f3f4f8;\n  border-radius: 0.7rem;\n  padding: 0.7rem 1rem;\n  gap: 0.7rem;\n}\n\n.group-info {\n  display: flex;\n  align-items: center;\n  gap: 0.7rem;\n}\n\n.group-avatar {\n  font-size: 1.5rem;\n  color: #4f46e5;\n  background: #e0e7ff;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.group-details {\n  display: flex;\n  flex-direction: column;\n}\n\n.group-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #23263a;\n}\n\n.group-desc {\n  font-size: 0.85rem;\n  color: #6b7280;\n  max-width: 120px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.pending-btn {\n  background: #ad8f0a;\n}\n\n.follow-btn,\n.pending-btn {\n  color: #fff;\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.4rem 1.1rem;\n  font-size: 0.95rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.follow-btn {\n  background: #4f46e5;\n}\n\n.follow-btn:hover {\n  background: #23263a;\n}\n\n.followed-btn {\n  background: #e5e7eb;\n  color: #4f46e5;\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.4rem 1.1rem;\n  font-size: 0.95rem;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.users-section {\n  margin-top: 2rem;\n  height: 300px;\n  overflow-y: auto;\n  padding-right: 10px;\n}\n\n.users-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #23263a;\n}\n\n.users-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.user-list-item {\n  display: flex;\n  align-items: center;\n  gap: 0.7rem;\n  background: #f3f4f8;\n  border-radius: 0.7rem;\n  padding: 0.7rem 1rem;\n}\n\n.mini-profile-pic {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  object-fit: cover;\n  cursor: pointer;\n}\n\n.user-name {\n  font-size: 1rem;\n  color: #23263a;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(35, 38, 58, 0.45);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n  transition: background 0.3s;\n}\n\n.create-group-modal {\n  background: #fff;\n  border-radius: 1.2rem;\n  box-shadow: 0 8px 32px rgba(35, 38, 58, 0.18);\n  padding: 2.5rem 2.5rem 2rem 2.5rem;\n  min-width: 340px;\n  max-width: 95vw;\n  animation: modalPopIn 0.25s cubic-bezier(.4, 2, .6, 1) both;\n}\n\n@keyframes modalPopIn {\n  0% {\n    transform: scale(0.95) translateY(30px);\n    opacity: 0;\n  }\n\n  100% {\n    transform: scale(1) translateY(0);\n    opacity: 1;\n  }\n}\n\n.create-group-modal h3 {\n  color: #4f46e5;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  font-size: 1.3rem;\n  font-weight: 700;\n}\n\n.create-group-modal .form-group label {\n  color: #23263a;\n  font-weight: 600;\n}\n\n.create-group-modal .form-group input,\n.create-group-modal .form-group textarea {\n  background: #f3f4f8;\n  border: none;\n  border-radius: 0.7rem;\n  padding: 0.8rem 1.1rem;\n  font-size: 1rem;\n  margin-bottom: 0.7rem;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.create-group-modal .form-group textarea {\n  min-height: 80px;\n  resize: vertical;\n}\n\n.create-group-modal .modal-buttons {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  margin-top: 1.2rem;\n}\n\n.create-group-modal .submit-btn {\n  background: #4f46e5;\n  color: #fff;\n  padding: 0.7rem 1.5rem;\n  border: none;\n  border-radius: 0.5rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.create-group-modal .submit-btn:hover {\n  background: #23263a;\n}\n\n.create-group-modal .cancel-btn {\n  background: #e5e7eb;\n  color: #23263a;\n  padding: 0.7rem 1.5rem;\n  border: none;\n  border-radius: 0.5rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.create-group-modal .cancel-btn:hover {\n  background: #cbd5e1;\n}\n\n/* Comments Section */\n.comments-section {\n  margin-top: 1.1rem;\n  padding: 1.1rem;\n  background: #f8fafc;\n  border-radius: 0.7rem;\n  border: 1px solid #e5e7eb;\n}\n\n.no-comments {\n  text-align: center;\n  color: #6b7280;\n  font-size: 0.95rem;\n  padding: 1rem 0;\n  background: #fff;\n  border-radius: 0.5rem;\n  border: 1px dashed #e5e7eb;\n}\n\n.comment {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: #fff;\n  border-radius: 0.7rem;\n  padding: 1rem;\n  margin-bottom: 0.7rem;\n  border: 1px solid #e5e7eb;\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.comment:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(35, 38, 58, 0.06);\n}\n\n.comment-header {\n  display: flex;\n  align-items: center;\n  gap: 0.7rem;\n  margin-bottom: 0.5rem;\n}\n\n.comment-author-pic {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid #e5e7eb;\n}\n\n.comment-header h5 {\n  color: #23263a;\n  font-size: 0.95rem;\n  margin: 0;\n  font-weight: 600;\n}\n\n.comment-timestamp {\n  color: #6b7280;\n  font-size: 0.85rem;\n  margin: 0;\n}\n\n.comment-content {\n  color: #4b5563;\n  font-size: 0.95rem;\n  line-height: 1.5;\n  margin: 0.5rem 0;\n}\n\n.comment-image {\n  max-width: 100%;\n  max-height: 300px;\n  width: auto;\n  height: auto;\n  object-fit: contain;\n  border-radius: 0.5rem;\n  margin-top: 0.7rem;\n}\n\n.comment-form {\n  display: flex;\n  flex-direction: column;\n  gap: 0.7rem;\n  margin-top: 1rem;\n  background: #fff;\n  padding: 1rem;\n  border-radius: 0.7rem;\n  border: 1px solid #e5e7eb;\n}\n\n.comment-input-row {\n  display: flex;\n  align-items: flex-end;\n  gap: 0.7rem;\n}\n\n.comment-form textarea {\n  flex: 1;\n  padding: 0.8rem 1rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.7rem;\n  font-size: 0.95rem;\n  background: #f8fafc;\n  min-height: 42px;\n  resize: vertical;\n  transition: border-color 0.2s, background 0.2s;\n}\n\n.comment-form textarea:focus {\n  border-color: #4f46e5;\n  background: #fff;\n  outline: none;\n}\n\n.comment-form input[type=\"file\"] {\n  display: none;\n}\n\n.comment-form .file-upload-label {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: #f3f4f8;\n  border-radius: 0.5rem;\n  padding: 0.5rem 0.8rem;\n  font-size: 0.9rem;\n  color: #23263a;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.comment-form .file-upload-label:hover {\n  background: #e0e7ff;\n}\n\n.comment-form .file-upload-label svg {\n  width: 18px;\n  height: 18px;\n  color: #4f46e5;\n}\n\n.comment-submit-btn {\n  background: #4f46e5;\n  color: #fff;\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.5rem 0.8rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.comment-submit-btn:hover {\n  background: #23263a;\n}\n\n.comment-error {\n  color: #ef4444;\n  font-size: 0.9rem;\n  margin-top: 0.3rem;\n  padding: 0.5rem;\n  background: #fee2e2;\n  border-radius: 0.5rem;\n  border: 1px solid #fecaca;\n}\n\n.comment-img {\n  max-width: 100%;\n  max-height: 300px;\n  width: auto;\n  height: auto;\n  object-fit: contain;\n  border-radius: 0.5rem;\n  margin-top: 0.7rem;\n  border: 1px solid #e5e7eb;\n}\n\n.group-clickable {\n  cursor: pointer;\n  transition: background 0.18s;\n}\n\n.group-clickable:hover {\n  background: #e0e7ff;\n}\n\n/* Chat Floating Action Button */\n.chat-fab {\n  position: fixed;\n  bottom: 2.2rem;\n  right: 2.2rem;\n  z-index: 3000;\n  background: #4f46e5;\n  color: #fff;\n  border: none;\n  border-radius: 50%;\n  width: 60px;\n  height: 60px;\n  box-shadow: 0 4px 16px rgba(35, 38, 58, 0.18);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2rem;\n  cursor: pointer;\n  transition: background 0.2s, box-shadow 0.2s;\n}\n\n.chat-fab:hover {\n  background: #23263a;\n  box-shadow: 0 8px 32px rgba(35, 38, 58, 0.22);\n}\n\n/* Chat Modal */\n.chat-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(35, 38, 58, 0.25);\n  z-index: 4000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.chat-modal {\n  background: #fff;\n  border-radius: 1.1rem;\n  box-shadow: 0 8px 32px rgba(35, 38, 58, 0.18);\n  width: 370px;\n  max-width: 95vw;\n  padding: 1.2rem 1.2rem 1.2rem 1.2rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  animation: modalPopIn 0.22s cubic-bezier(.4, 2, .6, 1) both;\n}\n\n.chat-modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #4f46e5;\n  margin-bottom: 0.2rem;\n}\n\n.chat-modal-close {\n  background: none;\n  border: none;\n  font-size: 2rem;\n  color: #b0b3c6;\n  cursor: pointer;\n  transition: color 0.2s;\n}\n\n.chat-modal-close:hover {\n  color: #ef4444;\n}\n\n.chat-users-list {\n  background: #f8fafc;\n  border-radius: 0.7rem;\n  padding: 0.7rem 0.5rem;\n  margin-bottom: 0.2rem;\n}\n\n.chat-users-title {\n  font-size: 1rem;\n  color: #23263a;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n.chat-users-list ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  max-height: 120px;\n  overflow-y: auto;\n}\n\n.chat-users-list li {\n  display: flex;\n  align-items: center;\n  gap: 0.7rem;\n  padding: 0.4rem 0.2rem;\n  border-radius: 0.5rem;\n  cursor: pointer;\n  transition: background 0.18s;\n}\n\n.chat-users-list li.selected,\n.chat-users-list li:hover {\n  background: #e0e7ff;\n}\n\n.chat-user-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.chat-messages-area {\n  background: #f8fafc;\n  border-radius: 0.7rem;\n  padding: 0.7rem 0.5rem;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.chat-messages-title {\n  font-size: 1rem;\n  color: #4f46e5;\n  font-weight: 600;\n  margin-bottom: 0.3rem;\n}\n\n.chat-messages-list {\n  flex: 1;\n  max-height: 180px;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 0.4rem;\n  scroll-behavior: smooth;\n  padding-right: 0.5rem;\n}\n\n.chat-messages-list::-webkit-scrollbar {\n  width: 6px;\n}\n\n.chat-messages-list::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 3px;\n}\n\n.chat-messages-list::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.chat-messages-list::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n.chat-msg {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  background: #fff;\n  border-radius: 0.5rem;\n  padding: 0.4rem 0.7rem;\n  font-size: 0.97rem;\n  box-shadow: 0 1px 4px rgba(35, 38, 58, 0.06);\n  max-width: 80%;\n}\n\n.chat-msg.self {\n  align-self: flex-end;\n  background: #4f46e5;\n  color: #fff;\n}\n\n.chat-msg.other {\n  align-self: flex-start;\n  background: #e5e7eb;\n  color: #23263a;\n}\n\n.chat-msg-time {\n  font-size: 0.75rem;\n  color: #b0b3c6;\n  margin-top: 0.1rem;\n  align-self: flex-end;\n}\n\n.chat-send-form {\n  display: flex;\n  gap: 0.4rem;\n  margin-top: 0.3rem;\n}\n\n.chat-send-form input {\n  flex: 1;\n  padding: 0.5rem 0.8rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.5rem;\n  font-size: 0.97rem;\n  background: #fff;\n}\n\n.chat-send-btn {\n  background: #4f46e5;\n  color: #fff;\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.4rem 0.7rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.chat-send-btn:hover {\n  background: #23263a;\n}\n\n.chat-no-user {\n  color: #b0b3c6;\n  text-align: center;\n  font-size: 1rem;\n  padding: 1.2rem 0;\n}\n\n/* Custom scrollbar */\n.groups-section::-webkit-scrollbar {\n  width: 6px;\n}\n\n.groups-section::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 3px;\n}\n\n.groups-section::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.groups-section::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n/* Custom scrollbar for users section */\n.users-section::-webkit-scrollbar {\n  width: 6px;\n}\n\n.users-section::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 3px;\n}\n\n.users-section::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.users-section::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n.notif-popup {\n  position: absolute;\n  top: 70px;\n  left: 80px;\n  width: 350px;\n  background: #fff;\n  border-radius: 1.1rem;\n  box-shadow: 0 8px 32px rgba(35, 38, 58, 0.18);\n  z-index: 5000;\n  padding: 0.5rem 0 0.5rem 0;\n  animation: modalPopIn 0.22s cubic-bezier(.4, 2, .6, 1) both;\n}\n\n.notif-popup-header {\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: #4f46e5;\n  padding: 1rem 1.5rem 0.5rem 1.5rem;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.notif-list {\n  list-style: none;\n  margin: 0;\n  padding: 0.5rem 0;\n  max-height: 400px;\n  overflow-y: auto;\n}\n\n.notif-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.7rem;\n  padding: 0.8rem 1.5rem;\n  font-size: 0.98rem;\n  color: #23263a;\n  border-bottom: 1px solid #f3f4f8;\n  transition: background 0.18s;\n  position: relative;\n  cursor: pointer;\n}\n\n.notif-item:last-child {\n  border-bottom: none;\n}\n\n.notif-item:hover {\n  background: #f8fafc;\n}\n\n.notif-avatar img {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid #e5e7eb;\n  flex-shrink: 0;\n}\n\n.notif-text {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.2rem;\n}\n\n.notif-text b {\n  color: #4f46e5;\n  font-weight: 600;\n}\n\n.notif-text span {\n  color: #4b5563;\n  line-height: 1.4;\n}\n\n.notif-time {\n  font-size: 0.85rem;\n  color: #6b7280;\n  margin-left: 0.5rem;\n  white-space: nowrap;\n}\n\n.notif-item.empty {\n  color: #b0b3c6;\n  text-align: center;\n  justify-content: center;\n  font-size: 1rem;\n  padding: 2rem 1.5rem;\n}\n\n.notif-item.unread {\n  background: #f0f7ff;\n  border-left: 3px solid #4f46e5;\n}\n\n.notif-item.unread::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  right: 1rem;\n  transform: translateY(-50%);\n  width: 8px;\n  height: 8px;\n  background: #4f46e5;\n  border-radius: 50%;\n}\n\n.owner-badge {\n  font-size: 0.75rem;\n  color: #4f46e5;\n  background: #e0e7ff;\n  padding: 0.1rem 0.4rem;\n  border-radius: 0.3rem;\n  margin-top: 0.2rem;\n  display: inline-block;\n}\n\n.create-post-form input[type=\"file\"] {\n  display: none;\n}\n\n.create-post-form .file-upload-label {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: #f3f4f8;\n  border-radius: 0.75rem;\n  padding: 0.7rem 1.2rem;\n  font-size: 0.95rem;\n  color: #23263a;\n  cursor: pointer;\n  transition: background 0.2s;\n  margin-bottom: 0.5rem;\n}\n\n.create-post-form .file-upload-label:hover {\n  background: #e0e7ff;\n}\n\n.create-post-form .file-upload-label svg {\n  width: 20px;\n  height: 20px;\n  color: #4f46e5;\n}\n\n.create-post-form .image-preview {\n  max-width: 300px;\n  max-height: 300px;\n  width: auto;\n  height: auto;\n  object-fit: contain;\n  border-radius: 0.75rem;\n  margin-top: 0.5rem;\n  display: block;\n  background: #f3f4f8;\n}\n\n.file-name-display {\n  font-size: 0.9rem;\n  color: #4f46e5;\n  background: #e0e7ff;\n  padding: 0.5rem 0.8rem;\n  border-radius: 0.5rem;\n  margin-top: 0.5rem;\n  display: inline-block;\n}\n\n.post-image {\n  object-fit: cover;\n  width: fit-content;\n  height: 300px;\n}\n\n@media (max-width: 768px) {\n  .post-card {\n    width: 100%;\n  }\n  .post-image img {\n    height: 250px;\n  }\n}\n\n@media (max-width: 900px) {\n  .posts-grid {\n    max-width: 100%;\n    padding: 0 1rem;\n  }\n}\n\n/* Remove the grid layout for larger screens */\n@media (min-width: 768px) {\n  .posts-grid {\n    display: flex;\n    flex-direction: column;\n    gap: 2rem;\n  }\n}\n\n/* Responsive Design */\n@media (max-width: 1024px) {\n  .forum-layout {\n    flex-direction: column;\n  }\n\n  .sidebar {\n    width: 100%;\n    flex-direction: row;\n    padding: 1rem;\n    border-radius: 0;\n    justify-content: center;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: auto;\n    height: auto;\n    z-index: 1000;\n  }\n\n  .sidebar-icons {\n    flex-direction: row;\n    justify-content: center;\n    gap: 1.5rem;\n    position: relative; /* Change from fixed to relative */\n  }\n\n  .main-area {\n    margin-left: 0; /* Remove margin on mobile */\n    margin-top: 80px; /* Add margin for fixed top sidebar */\n    padding: 1rem;\n  }\n\n  .rightbar {\n    width: 100%;\n    border-radius: 0;\n    margin-top: 1rem;\n  }\n\n  .posts-grid {\n    max-width: 100%;\n  }\n\n  .chat-fab {\n    bottom: 1.5rem;\n    right: 1.5rem;\n  }\n\n  .notif-popup {\n    left: 50%;\n    transform: translateX(-50%);\n    top: 80px;\n  }\n}\n\n@media (max-width: 768px) {\n  .sidebar-icons {\n    gap: 1rem;\n  }\n\n  .sidebar-icon {\n    width: 40px;\n    height: 40px;\n  }\n\n  .create-post-card {\n    padding: 1rem;\n  }\n\n  .post-card {\n    padding: 1rem;\n  }\n\n  .post-image img {\n    height: 200px;\n  }\n\n  .post-title {\n    font-size: 1.2rem;\n  }\n\n  .post-content {\n    font-size: 1rem;\n  }\n\n  .chat-modal {\n    width: 95vw;\n    height: 90vh;\n  }\n\n  .groups-section,\n  .users-section {\n    height: 250px;\n  }\n}\n\n@media (max-width: 480px) {\n  .sidebar-icons {\n    gap: 0.8rem;\n  }\n\n  .sidebar-icon {\n    width: 36px;\n    height: 36px;\n  }\n\n  .post-header {\n    gap: 0.7rem;\n  }\n\n  .post-author-pic {\n    width: 40px;\n    height: 40px;\n  }\n\n  .post-image img {\n    height: 180px;\n  }\n\n  .create-post-form input,\n  .create-post-form textarea {\n    font-size: 0.95rem;\n  }\n\n  .chat-modal {\n    padding: 1rem;\n  }\n\n  .chat-messages-list {\n    max-height: 150px;\n  }\n}\n\n/* Ensure content is properly centered on mobile */\n@media (max-width: 1024px) {\n  .main-area {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .avatar-bar {\n    width: 100%;\n    max-width: 900px;\n  }\n\n  .create-post-card {\n    width: 100%;\n    max-width: 900px;\n  }\n}\n\n/* Image Modal Styles */\n.image-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.85);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 5000;\n  animation: fadeIn 0.2s ease;\n  padding: 2rem;\n}\n\n.image-modal-content {\n  position: relative;\n  max-width: 90vw;\n  max-height: 85vh;\n  animation: zoomIn 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #f3f4f8;\n  border-radius: 0.5rem;\n  padding: 1rem;\n}\n\n.image-modal-content img {\n  max-width: 100%;\n  max-height: 85vh;\n  width: auto;\n  height: auto;\n  object-fit: contain;\n  border-radius: 0.5rem;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n\n.close-modal-btn {\n  position: absolute;\n  top: -40px;\n  right: 0;\n  background: none;\n  border: none;\n  color: white;\n  font-size: 2rem;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: opacity 0.2s;\n  z-index: 1;\n}\n\n.close-modal-btn:hover {\n  opacity: 0.8;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n@keyframes zoomIn {\n  from { transform: scale(0.95); }\n  to { transform: scale(1); }\n}\n\n/* Add cursor pointer to clickable images */\n.post-image img,\n.comment-image,\n.create-post-form .image-preview {\n  cursor: pointer;\n  transition: opacity 0.2s;\n}\n\n.post-image img:hover,\n.comment-image:hover,\n.create-post-form .image-preview:hover {\n  opacity: 0.9;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}