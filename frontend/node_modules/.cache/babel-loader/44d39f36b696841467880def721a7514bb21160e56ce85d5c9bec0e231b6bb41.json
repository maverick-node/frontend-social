{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"h1\", null, \"WebSocket\", -1)), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", null, \"Receiver: \" + _toDisplayString($data.receiver), 1)]), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.message = $event),\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => $options.sendMessage && $options.sendMessage(...args), [\"enter\"])),\n    placeholder: \"Type a message...\"\n  }, null, 544), [[_vModelText, $data.message]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.sendMessage && $options.sendMessage(...args))\n  }, \"Send\")]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, (msg, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, _toDisplayString(msg), 1);\n  }), 128))]);\n}","map":{"version":3,"names":["_createElementBlock","_createElementVNode","_toDisplayString","$data","receiver","_cache","$event","message","onKeyup","_withKeys","args","$options","sendMessage","placeholder","onClick","_Fragment","_renderList","messages","msg","index","key"],"sources":["/Users/apple/Desktop/front/frontend-social/frontend/src/components/WebSocket.vue"],"sourcesContent":["<template>\n    <div>\n        <h1>WebSocket</h1>\n        <div>\n            <div>Receiver: {{ receiver }}</div>\n        </div>\n        <div>\n            <input v-model=\"message\" @keyup.enter=\"sendMessage\" placeholder=\"Type a message...\" />\n            <button @click=\"sendMessage\">Send</button>\n        </div>\n        <div v-for=\"(msg, index) in messages\" :key=\"index\">{{ msg }}</div>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            socket: null,\n            message: '',\n            receiver: 'admin',\n            messages: [],\n            currentMessage: {\n                type: '',\n                message: '',\n                receiver: '',\n                username: ''\n            }\n        };\n    },\n    \n    mounted() {\n        \n        this.socket = new WebSocket(\"ws://http://social-net.duckdns.org:8080/ws\");\n\n        this.socket.onmessage = (event) => {\n            const data = JSON.parse(event.data);\n           console.log(data);\n           \n        };\n\n        this.socket.onopen = () => {\n            console.log(\"WebSocket connected\");\n        };\n\n        this.socket.onerror = (error) => {\n            console.error(\"WebSocket error:\", error);\n        };\n\n        this.socket.onclose = () => {\n            console.log(\"WebSocket disconnected\");\n        };\n    },\n    methods: {\n        sendMessage() {\n            if (this.socket && this.message.trim() !== \"\") {\n                this.currentMessage.type = \"message\";\n                this.currentMessage.receiver = this.receiver;\n                this.currentMessage.username = \"afethi\";\n                this.currentMessage.message = this.message;\n                this.socket.send(JSON.stringify(this.currentMessage));\n                this.messages.push(`Sent: ${this.message}`);\n                this.message = \"\";\n            }\n        },\n    },\n};\n</script>"],"mappings":";;uBACIA,mBAAA,CAUM,c,0BATFC,mBAAA,CAAkB,YAAd,WAAS,QACbA,mBAAA,CAEM,cADFA,mBAAA,CAAmC,aAA9B,YAAU,GAAAC,gBAAA,CAAGC,KAAA,CAAAC,QAAQ,M,GAE9BH,mBAAA,CAGM,c,gBAFFA,mBAAA,CAAsF;IAPlG,uBAAAI,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAO4BH,KAAA,CAAAI,OAAO,GAAAD,MAAA;IAAGE,OAAK,EAAAH,MAAA,QAAAA,MAAA,MAP3CI,SAAA,KAAAC,IAAA,KAOmDC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IAAEG,WAAW,EAAC;gCAAhDV,KAAA,CAAAI,OAAO,E,GACvBN,mBAAA,CAA0C;IAAjCa,OAAK,EAAAT,MAAA,QAAAA,MAAA,UAAAK,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;KAAE,MAAI,E,sBAErCV,mBAAA,CAAkEe,SAAA,QAV1EC,WAAA,CAUoCb,KAAA,CAAAc,QAAQ,EAV5C,CAUqBC,GAAG,EAAEC,KAAK;yBAAvBnB,mBAAA,CAAkE;MAA3BoB,GAAG,EAAED;IAAK,GAAAjB,gBAAA,CAAKgB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}