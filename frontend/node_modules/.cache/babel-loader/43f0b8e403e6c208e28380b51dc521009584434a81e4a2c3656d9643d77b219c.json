{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      socket: null,\n      message: '',\n      receiver: 'admin',\n      messages: [],\n      currentMessage: {\n        type: '',\n        message: '',\n        receiver: '',\n        username: ''\n      }\n    };\n  },\n  mounted() {\n    // Use native WebSocket API\n    const wsUrl = import.meta.env.VITE_API_URL.replace('http', 'ws');\n    this.socket = new WebSocket(`${wsUrl}/ws`);\n    this.socket.onmessage = event => {\n      const data = JSON.parse(event.data);\n      console.log(data);\n    };\n    this.socket.onopen = () => {\n      console.log(\"WebSocket connected\");\n    };\n    this.socket.onerror = error => {\n      console.error(\"WebSocket error:\", error);\n    };\n    this.socket.onclose = () => {\n      console.log(\"WebSocket disconnected\");\n    };\n  },\n  methods: {\n    sendMessage() {\n      if (this.socket && this.message.trim() !== \"\") {\n        this.currentMessage.type = \"message\";\n        this.currentMessage.receiver = this.receiver;\n        this.currentMessage.username = \"afethi\";\n        this.currentMessage.message = this.message;\n        this.socket.send(JSON.stringify(this.currentMessage));\n        this.messages.push(`Sent: ${this.message}`);\n        this.message = \"\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","socket","message","receiver","messages","currentMessage","type","username","mounted","wsUrl","import","meta","env","VITE_API_URL","replace","WebSocket","onmessage","event","JSON","parse","console","log","onopen","onerror","error","onclose","methods","sendMessage","trim","send","stringify","push"],"sources":["/Users/apple/Desktop/social-1/social-network/frontend/src/components/WebSocket.vue"],"sourcesContent":["<template>\n    <div>\n        <h1>WebSocket</h1>\n        <div>\n            <div>Receiver: {{ receiver }}</div>\n        </div>\n        <div>\n            <input v-model=\"message\" @keyup.enter=\"sendMessage\" placeholder=\"Type a message...\" />\n            <button @click=\"sendMessage\">Send</button>\n        </div>\n        <div v-for=\"(msg, index) in messages\" :key=\"index\">{{ msg }}</div>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            socket: null,\n            message: '',\n            receiver: 'admin',\n            messages: [],\n            currentMessage: {\n                type: '',\n                message: '',\n                receiver: '',\n                username: ''\n            }\n        };\n    },\n    \n    mounted() {\n        // Use native WebSocket API\n        const wsUrl = import.meta.env.VITE_API_URL.replace('http', 'ws');\n        this.socket = new WebSocket(`${wsUrl}/ws`);\n\n        this.socket.onmessage = (event) => {\n            const data = JSON.parse(event.data);\n           console.log(data);\n           \n        };\n\n        this.socket.onopen = () => {\n            console.log(\"WebSocket connected\");\n        };\n\n        this.socket.onerror = (error) => {\n            console.error(\"WebSocket error:\", error);\n        };\n\n        this.socket.onclose = () => {\n            console.log(\"WebSocket disconnected\");\n        };\n    },\n    methods: {\n        sendMessage() {\n            if (this.socket && this.message.trim() !== \"\") {\n                this.currentMessage.type = \"message\";\n                this.currentMessage.receiver = this.receiver;\n                this.currentMessage.username = \"afethi\";\n                this.currentMessage.message = this.message;\n                this.socket.send(JSON.stringify(this.currentMessage));\n                this.messages.push(`Sent: ${this.message}`);\n                this.message = \"\";\n            }\n        },\n    },\n};\n</script>"],"mappings":";AAeA,eAAe;EACXA,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,MAAM,EAAE,IAAI;MACZC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE,OAAO;MACjBC,QAAQ,EAAE,EAAE;MACZC,cAAc,EAAE;QACZC,IAAI,EAAE,EAAE;QACRJ,OAAO,EAAE,EAAE;QACXC,QAAQ,EAAE,EAAE;QACZI,QAAQ,EAAE;MACd;IACJ,CAAC;EACL,CAAC;EAEDC,OAAOA,CAAA,EAAG;IACN;IACA,MAAMC,KAAI,GAAIC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC;IAChE,IAAI,CAACb,MAAK,GAAI,IAAIc,SAAS,CAAC,GAAGN,KAAK,KAAK,CAAC;IAE1C,IAAI,CAACR,MAAM,CAACe,SAAQ,GAAKC,KAAK,IAAK;MAC/B,MAAMjB,IAAG,GAAIkB,IAAI,CAACC,KAAK,CAACF,KAAK,CAACjB,IAAI,CAAC;MACpCoB,OAAO,CAACC,GAAG,CAACrB,IAAI,CAAC;IAEpB,CAAC;IAED,IAAI,CAACC,MAAM,CAACqB,MAAK,GAAI,MAAM;MACvBF,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IACtC,CAAC;IAED,IAAI,CAACpB,MAAM,CAACsB,OAAM,GAAKC,KAAK,IAAK;MAC7BJ,OAAO,CAACI,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IAC5C,CAAC;IAED,IAAI,CAACvB,MAAM,CAACwB,OAAM,GAAI,MAAM;MACxBL,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IACzC,CAAC;EACL,CAAC;EACDK,OAAO,EAAE;IACLC,WAAWA,CAAA,EAAG;MACV,IAAI,IAAI,CAAC1B,MAAK,IAAK,IAAI,CAACC,OAAO,CAAC0B,IAAI,CAAC,MAAM,EAAE,EAAE;QAC3C,IAAI,CAACvB,cAAc,CAACC,IAAG,GAAI,SAAS;QACpC,IAAI,CAACD,cAAc,CAACF,QAAO,GAAI,IAAI,CAACA,QAAQ;QAC5C,IAAI,CAACE,cAAc,CAACE,QAAO,GAAI,QAAQ;QACvC,IAAI,CAACF,cAAc,CAACH,OAAM,GAAI,IAAI,CAACA,OAAO;QAC1C,IAAI,CAACD,MAAM,CAAC4B,IAAI,CAACX,IAAI,CAACY,SAAS,CAAC,IAAI,CAACzB,cAAc,CAAC,CAAC;QACrD,IAAI,CAACD,QAAQ,CAAC2B,IAAI,CAAC,SAAS,IAAI,CAAC7B,OAAO,EAAE,CAAC;QAC3C,IAAI,CAACA,OAAM,GAAI,EAAE;MACrB;IACJ;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}